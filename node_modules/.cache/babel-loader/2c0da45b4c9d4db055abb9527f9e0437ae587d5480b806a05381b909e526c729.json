{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getSpecialDay, deleteSpecialDay, add, update } from \"@/api/holiday\";\nexport default {\n  jqmc: \"Fdjjr\",\n  data() {\n    return {\n      rqi: [],\n      rqineirong: {},\n      // 遮罩层\n      loading: true,\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        jqmc: [{\n          required: true,\n          message: \"假期名称不能为空\",\n          trigger: \"blur\"\n        }],\n        kssj: [{\n          required: true,\n          message: \"开始时间不能为空\",\n          trigger: \"blur\"\n        }],\n        jssj: [{\n          required: true,\n          message: \"结束时间不能为空\",\n          trigger: \"blur\"\n        }],\n        lx: [{\n          required: true,\n          message: \"假期类型不能为空\",\n          trigger: \"change\"\n        }],\n        nf: [{\n          required: true,\n          message: \"年份不能为空\",\n          trigger: \"change\"\n        }],\n        isRest: [{\n          required: true,\n          message: \"是否休假类型不能为空\",\n          trigger: \"change\"\n        }]\n      },\n      // 节假日类型\n      // 中国传统节日，国际节日，商业或现代衍生日（程序员节），台湾节日，香港节日，中国少民节日，公司特殊日，纪念日（如香港回归））\n      specialOptions: [{\n        value: '中国传统节日',\n        label: '中国传统节日'\n      }, {\n        value: '国际节日',\n        label: '国际节日'\n      }, {\n        value: '商业或现代衍生日',\n        label: '商业或现代衍生日（如双十一)'\n      }, {\n        value: '台湾节日',\n        label: '台湾节日'\n      }, {\n        value: '香港节日',\n        label: '香港节日'\n      }, {\n        value: '中国少数民族节日',\n        label: '中国少数民族节日'\n      }, {\n        value: '公司特殊日',\n        label: '公司特殊日'\n      }, {\n        value: '纪念日',\n        label: '纪念日'\n      }, {\n        value: '纪念日',\n        label: '纪念日'\n      }, {\n        value: '周末',\n        label: '周末'\n      }, {\n        value: '补班',\n        label: '补班'\n      }]\n    };\n  },\n  created() {\n    this.getList();\n    // this.getDicts(\"jjr_fdjjr_lx\").then(response => {\n    //   this.jjrlxOptions = response.data;\n    // });\n  },\n\n  methods: {\n    /** 查询节假日管理 - 法定节假日列表 */\n    getList() {\n      this.loading = true;\n      getSpecialDay(this.queryParams).then(response => {\n        // console.log(response.data.data.resultList)\n        this.rqi = [];\n        this.rqineirong = {};\n        for (let i = 0; i < response.data.data.resultList.length; i++) {\n          for (var key in response.data.data.resultList[i]) {\n            this.rqi.push(key);\n            this.rqineirong[key] = response.data.data.resultList[i][key];\n          }\n        }\n        console.log(this.rqi);\n      });\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        jqmc: undefined,\n        kssj: undefined,\n        jssj: undefined,\n        lx: undefined\n      };\n      // this.resetForm(\"form\");\n    },\n\n    /** 搜索按钮操作 */\n    handleQuery(day) {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 提交按钮 */\n    submitForm: function () {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != undefined) {\n            update(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '修改成功'\n                });\n                this.open = false;\n                this.reset();\n                this.getList();\n              }\n            });\n          } else {\n            add(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '添加成功'\n                });\n                this.open = false;\n                this.reset();\n                this.getList();\n              }\n            });\n          }\n        }\n      });\n    },\n    /** 编辑日期操作 */\n    handleBianJi(day) {\n      if (this.rqineirong[day]) {\n        console.log(this.rqineirong[day]);\n        this.form = this.rqineirong[day];\n        this.title = '编辑特殊日';\n      } else {\n        let obj = {};\n        obj.kssj = day.valueOf();\n        obj.jssj = day.valueOf();\n        this.form = obj;\n        this.form = obj;\n        this.title = '新增特殊日';\n      }\n      this.open = true;\n    },\n    deleteForm() {\n      let ids = [];\n      ids.push(this.form.id);\n      deleteSpecialDay(ids).then(res => {\n        if (res.data.code === 200) {\n          this.msgSuccess(\"删除成功\");\n          this.open = false;\n          this.reset();\n          this.getList();\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["getSpecialDay","deleteSpecialDay","add","update","jqmc","data","rqi","rqineirong","loading","title","open","form","rules","required","message","trigger","kssj","jssj","lx","nf","isRest","specialOptions","value","label","created","getList","methods","queryParams","then","response","i","resultList","length","key","push","console","log","cancel","reset","undefined","handleQuery","day","pageNum","submitForm","$refs","validate","valid","id","res","code","$message","type","handleBianJi","obj","valueOf","deleteForm","ids","msgSuccess"],"sources":["src/view/pulse/Calendar.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-calendar>\n      <template slot=\"dateCell\" slot-scope=\"{date, data}\">\n        <div id=\"dateCell\" :class=\"rqi.indexOf(data.day) > -1 ? 'is-selected' : ''\" @click=\"handleBianJi(data.day)\">\n          <span style=\"width: 100%; color: #000;\">{{ data.day.split('-').slice(1).join('-') }} </span>\n          <span style=\"margin-right: 11px;\">{{ rqi.indexOf(data.day) > -1 ? rqineirong[data.day].jqmc : ''}}</span>\n          <!-- <span>排程</span> -->\n        </div>\n      </template>\n    </el-calendar>\n\n    <!-- 添加或修改节假日管理 - 法定节假日对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-form-item label=\"假期名称\" prop=\"jqmc\">\n          <el-input v-model=\"form.jqmc\" placeholder=\"请输入假期名称\" />\n        </el-form-item>\n        <el-form-item label=\"开始时间\" prop=\"kssj\">\n          <el-date-picker clearable size=\"small\" style=\"width: 200px\" v-model=\"form.kssj\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择开始时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结束时间\" prop=\"jssj\">\n          <el-date-picker clearable size=\"small\" style=\"width: 200px\" v-model=\"form.jssj\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择结束时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"类型\" prop=\"lx\">\n          <el-select v-model=\"form.lx\" placeholder=\"请选择类型\" clearable :style=\"{ width: '200px' }\">\n            <el-option v-for=\"(item,index) in specialOptions\" :key=\"item.index\" :label=\"item.label\" :value=\"item.value\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"是否休息\" prop=\"isRest\">\n          <el-select v-model=\"form.isRest\" placeholder=\"请选择类型\" clearable :style=\"{ width: '200px' }\">\n            <el-option label=\"是\" :value=\"1\" />\n            <el-option label=\"否\" :value=\"0\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"年份\" prop=\"nf\">\n          <el-select v-model=\"form.nf\" placeholder=\"请选择类型\" clearable :style=\"{ width: '200px' }\">\n            <el-option v-for=\"item in 10\" :key=\"item\" :label=\"2015 + item\" :value=\"2015 + item\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n        <el-button v-if=\"title == '编辑特殊日'\" @click=\"deleteForm\" :style=\"{ background: 'red',color:'white'}\">删除</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getSpecialDay, deleteSpecialDay, add, update } from \"@/api/holiday\";\n\nexport default {\n  jqmc: \"Fdjjr\",\n  data() {\n    return {\n      rqi:[],\n      rqineirong:{},\n      // 遮罩层\n      loading: true,\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        jqmc: [\n          { required: true, message: \"假期名称不能为空\", trigger: \"blur\" }\n        ],\n        kssj: [\n          { required: true, message: \"开始时间不能为空\", trigger: \"blur\" }\n        ],\n        jssj: [\n          { required: true, message: \"结束时间不能为空\", trigger: \"blur\" }\n        ],\n        lx: [\n          { required: true, message: \"假期类型不能为空\", trigger: \"change\" }\n        ],\n        nf: [\n          { required: true, message: \"年份不能为空\", trigger: \"change\" }\n        ],\n        isRest: [\n          { required: true, message: \"是否休假类型不能为空\", trigger: \"change\" }\n        ],\n      },\n      // 节假日类型\n      // 中国传统节日，国际节日，商业或现代衍生日（程序员节），台湾节日，香港节日，中国少民节日，公司特殊日，纪念日（如香港回归））\n      specialOptions: [\n        {\n          value: '中国传统节日',\n          label: '中国传统节日'\n        },\n        {\n          value: '国际节日',\n          label: '国际节日'\n        },\n        {\n          value: '商业或现代衍生日',\n          label: '商业或现代衍生日（如双十一)'\n        },\n        {\n          value: '台湾节日',\n          label: '台湾节日'\n        },\n        {\n          value: '香港节日',\n          label: '香港节日'\n        },\n        {\n          value: '中国少数民族节日',\n          label: '中国少数民族节日'\n        },\n        {\n          value: '公司特殊日',\n          label: '公司特殊日'\n        },\n        {\n          value: '纪念日',\n          label: '纪念日'\n        },\n        {\n          value: '纪念日',\n          label: '纪念日'\n        },\n        {\n          value: '周末',\n          label: '周末'\n        },\n        {\n          value: '补班',\n          label: '补班'\n        },\n      ],\n    };\n  },\n  created() {\n    this.getList()\n    // this.getDicts(\"jjr_fdjjr_lx\").then(response => {\n    //   this.jjrlxOptions = response.data;\n    // });\n  },\n  methods: {\n    /** 查询节假日管理 - 法定节假日列表 */\n    getList() {\n      this.loading = true;\n      getSpecialDay(this.queryParams).then(response => {\n        // console.log(response.data.data.resultList)\n        this.rqi = [];\n        this.rqineirong = {};\n        for(let i=0;i<response.data.data.resultList.length;i++){\n          for(var key in response.data.data.resultList[i]){\n            this.rqi.push(key)\n            this.rqineirong[key] = response.data.data.resultList[i][key]\n          }\n        }\n        console.log(this.rqi)\n      });\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        jqmc: undefined,\n        kssj: undefined,\n        jssj: undefined,\n        lx: undefined\n      };\n      // this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery(day) {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 提交按钮 */\n    submitForm: function() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != undefined) {\n            update(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '修改成功'\n                })\n                this.open = false\n                this.reset()\n                this.getList()\n              }\n            })\n          } else {\n            add(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '添加成功'\n                })\n                this.open = false\n                this.reset()\n                this.getList()\n              }\n            });\n          }\n        }\n      });\n    },\n    /** 编辑日期操作 */\n    handleBianJi(day) {\n      if(this.rqineirong[day]){\n        console.log(this.rqineirong[day])\n        this.form = this.rqineirong[day]\n        this.title = '编辑特殊日'\n      }else{\n        let obj = {}\n        obj.kssj = day.valueOf()\n        obj.jssj = day.valueOf()\n        this.form = obj\n        this.form = obj\n        this.title = '新增特殊日'\n      }\n      this.open = true\n    },\n    deleteForm(){\n      let ids = [];\n      ids.push(this.form.id)\n      deleteSpecialDay(ids).then(res => {\n        if (res.data.code === 200) {\n          this.msgSuccess(\"删除成功\")\n          this.open = false\n          this.reset()\n          this.getList()\n        }\n      });\n    }\n  }\n};\n</script>\n<style scoped>\n  .is-selected {\n    color: lightseagreen;\n    /* background: rgba(32, 178, 171, 0.305); */\n  }\n  .app-container {\n    margin: 7px;\n  }\n  #dateCell {\n    display: flex;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}