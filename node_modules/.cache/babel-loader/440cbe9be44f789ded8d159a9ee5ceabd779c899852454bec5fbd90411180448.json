{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getSpecialDay, deleteSpecialDay, add, update } from \"@/api/holiday\";\nimport scheduleApi from \"@/api/schedule\";\nimport groupApi from \"@/api/group\";\nimport questionApi from \"@/api/questions\";\nexport default {\n  jqmc: \"Fdjjr\",\n  data() {\n    return {\n      // 排程弹出\n      dialogVisible: false,\n      // 查看排程\n      dialogVisibleSchedule: false,\n      // 排程细节\n      scheduleDetailsAll: {},\n      scheduleForm: {},\n      formLabelWidth: '111px',\n      selectScheduleForm: {},\n      options: [],\n      schedule: [],\n      themes: [],\n      scheduleDetails: {},\n      questionDetails: [],\n      // 是否用随机组\n      isRandom: false,\n      rqi: [],\n      rqineirong: {},\n      // 遮罩层\n      loading: true,\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        jqmc: [{\n          required: true,\n          message: \"假期名称不能为空\",\n          trigger: \"blur\"\n        }],\n        kssj: [{\n          required: true,\n          message: \"开始时间不能为空\",\n          trigger: \"blur\"\n        }],\n        jssj: [{\n          required: true,\n          message: \"结束时间不能为空\",\n          trigger: \"blur\"\n        }],\n        lx: [{\n          required: true,\n          message: \"假期类型不能为空\",\n          trigger: \"change\"\n        }],\n        nf: [{\n          required: true,\n          message: \"年份不能为空\",\n          trigger: \"change\"\n        }],\n        isRest: [{\n          required: true,\n          message: \"是否休假类型不能为空\",\n          trigger: \"change\"\n        }]\n      },\n      // 节假日类型\n      // 中国传统节日，国际节日，商业或现代衍生日（程序员节），台湾节日，香港节日，中国少民节日，公司特殊日，纪念日（如香港回归））\n      specialOptions: [{\n        value: '中国传统节日',\n        label: '中国传统节日'\n      }, {\n        value: '国际节日',\n        label: '国际节日'\n      }, {\n        value: '商业或现代衍生日',\n        label: '商业或现代衍生日（如双十一)'\n      }, {\n        value: '台湾节日',\n        label: '台湾节日'\n      }, {\n        value: '香港节日',\n        label: '香港节日'\n      }, {\n        value: '中国少数民族节日',\n        label: '中国少数民族节日'\n      }, {\n        value: '公司特殊日',\n        label: '公司特殊日'\n      }, {\n        value: '纪念日',\n        label: '纪念日'\n      }, {\n        value: '纪念日',\n        label: '纪念日'\n      }, {\n        value: '周末',\n        label: '周末'\n      }, {\n        value: '补班',\n        label: '补班'\n      }]\n    };\n  },\n  created() {\n    this.getList();\n    this.queryScheduleListAll();\n    this.getOptions();\n    this.getQuestionAsOption();\n  },\n  methods: {\n    getQuestionAsOption() {\n      questionApi.getQuestionAsOption().then(res => {\n        if (res.data.code === 200) {\n          this.themes = res.data.data.list;\n          // console.log(this.themes)\n        }\n      });\n    },\n\n    change(e) {\n      this.options.forEach(element => {\n        if (e === element.id) {\n          this.scheduleForm.formula = element.formula;\n          this.scheduleForm.groupType = element.type;\n        }\n      });\n      if (this.scheduleForm.groupType === 0) {\n        this.isRandom = true;\n      }\n      // console.log(this.scheduleForm)\n    },\n\n    getOptions() {\n      groupApi.getFormDataListPage(1, 100, null).then(res => {\n        if (res.data.code === 200) {\n          this.options = res.data.data.rows;\n          // console.log(this.options)\n        }\n      });\n    },\n\n    toEditSchedule() {\n      scheduleApi.querySchedule(this.selectScheduleForm.id).then(res => {\n        // console.log(res.data.data.schedule)\n        if (res.data.code === 200) {\n          console.log(res.data.data.schedule);\n          this.dialogVisibleSchedule = true;\n          this.scheduleDetailsAll = res.data.data.schedule;\n          this.questionDetails = JSON.parse(this.scheduleDetailsAll.details);\n        }\n      });\n    },\n    editSchedule() {\n      this.dialogVisibleSchedule = false;\n    },\n    viewSchedule() {\n      this.scheduleForm = {};\n      this.dialogVisible = true;\n      this.scheduleForm.scheduleDate = this.form.kssj;\n      if (this.form.isRest) {\n        this.scheduleForm.isRest = this.form.isRest;\n      } else {\n        this.scheduleForm.isRest = 0;\n      }\n      if (this.form.jqmc) {\n        this.scheduleForm.special = this.form.jqmc;\n      } else {\n        this.scheduleForm.special = '普通日';\n      }\n    },\n    addSchedule() {\n      scheduleApi.addSchedule(this.scheduleForm).then(res => {\n        if (res.data.code === 200) {\n          this.$message({\n            type: 'success',\n            message: '添加成功'\n          });\n          this.selectScheduleForm = res.data.data.schedule;\n          this.dialogVisible = false;\n        }\n      });\n    },\n    /** 查询节假日管理 - 法定节假日列表 */\n    getList() {\n      this.loading = true;\n      getSpecialDay(this.queryParams).then(response => {\n        // console.log(response.data.data.resultList)\n        this.rqi = [];\n        this.rqineirong = {};\n        for (let i = 0; i < response.data.data.resultList.length; i++) {\n          for (var key in response.data.data.resultList[i]) {\n            this.rqi.push(key);\n            this.rqineirong[key] = response.data.data.resultList[i][key];\n          }\n        }\n        // console.log(this.rqi)\n        console.log(this.rqineirong);\n      });\n    },\n    queryScheduleListAll() {\n      scheduleApi.queryScheduleListAll().then(res => {\n        this.schedule = [];\n        this.scheduleDetails = {};\n        for (let i = 0; i < res.data.data.list.length; i++) {\n          for (var key in res.data.data.list[i]) {\n            this.schedule.push(key);\n            this.scheduleDetails[key] = res.data.data.list[i][key];\n          }\n        }\n        console.log(this.schedule);\n      });\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        jqmc: undefined,\n        kssj: undefined,\n        jssj: undefined,\n        lx: undefined\n      };\n      // this.resetForm(\"form\");\n    },\n\n    /** 搜索按钮操作 */\n    handleQuery(day) {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 提交按钮 */\n    submitForm: function () {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != undefined) {\n            update(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '修改成功'\n                });\n                this.open = false;\n                this.reset();\n                this.getList();\n              }\n            });\n          } else {\n            add(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '添加成功'\n                });\n                this.open = false;\n                this.reset();\n                this.getList();\n              }\n            });\n          }\n        }\n      });\n    },\n    /** 编辑日期操作 */\n    handleBianJi(day) {\n      if (this.rqineirong[day]) {\n        console.log(this.rqineirong[day]);\n        this.form = this.rqineirong[day];\n        this.title = '编辑特殊日';\n      } else {\n        let obj = {};\n        obj.kssj = day.valueOf();\n        obj.jssj = day.valueOf();\n        this.form = obj;\n        this.form = obj;\n        this.title = '新增特殊日';\n      }\n      this.open = true;\n      if (this.scheduleDetails[day]) {\n        this.selectScheduleForm = this.scheduleDetails[day];\n      } else {\n        this.selectScheduleForm = {};\n      }\n    },\n    deleteForm() {\n      let ids = [];\n      ids.push(this.form.id);\n      deleteSpecialDay(ids).then(res => {\n        if (res.data.code === 200) {\n          this.msgSuccess(\"删除成功\");\n          this.open = false;\n          this.reset();\n          this.getList();\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["getSpecialDay","deleteSpecialDay","add","update","scheduleApi","groupApi","questionApi","jqmc","data","dialogVisible","dialogVisibleSchedule","scheduleDetailsAll","scheduleForm","formLabelWidth","selectScheduleForm","options","schedule","themes","scheduleDetails","questionDetails","isRandom","rqi","rqineirong","loading","title","open","form","rules","required","message","trigger","kssj","jssj","lx","nf","isRest","specialOptions","value","label","created","getList","queryScheduleListAll","getOptions","getQuestionAsOption","methods","then","res","code","list","change","e","forEach","element","id","formula","groupType","type","getFormDataListPage","rows","toEditSchedule","querySchedule","console","log","JSON","parse","details","editSchedule","viewSchedule","scheduleDate","special","addSchedule","$message","queryParams","response","i","resultList","length","key","push","cancel","reset","undefined","handleQuery","day","pageNum","submitForm","$refs","validate","valid","handleBianJi","obj","valueOf","deleteForm","ids","msgSuccess"],"sources":["src/view/pulse/Calendar.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-button class=\"el-button--goon\">添加大范围排程</el-button>\n    <el-divider></el-divider>\n    <el-calendar>\n      <template slot=\"dateCell\" slot-scope=\"{date, data}\">\n        <div id=\"dateCell\" :class=\"rqi.indexOf(data.day) > -1 ? 'is-selected' : ''\" @click=\"handleBianJi(data.day)\">\n          <span style=\"color: #000;margin-right: 7px;\">{{ data.day.split('-').slice(1).join('-') }} </span>\n          <span style=\"margin-right: 11px;color: cadetblue;\">{{ schedule.indexOf(data.day) > -1 ? scheduleDetails[data.day].title : ''}}</span>\n          <span style=\"margin-right: 11px;width: 100%;\">{{ rqi.indexOf(data.day) > -1 ? rqineirong[data.day].jqmc : ''}}</span>\n          <!-- <span>排程</span> -->\n        </div>\n      </template>\n    </el-calendar>\n\n    <!-- 添加或修改节假日管理 - 法定节假日对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-form-item label=\"假期名称\" prop=\"jqmc\">\n          <el-input v-model=\"form.jqmc\" placeholder=\"请输入假期名称\" />\n        </el-form-item>\n        <el-form-item label=\"开始时间\" prop=\"kssj\">\n          <el-date-picker clearable size=\"small\" style=\"width: 200px\" v-model=\"form.kssj\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择开始时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结束时间\" prop=\"jssj\">\n          <el-date-picker clearable size=\"small\" style=\"width: 200px\" v-model=\"form.jssj\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择结束时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"类型\" prop=\"lx\">\n          <el-select v-model=\"form.lx\" placeholder=\"请选择类型\" clearable :style=\"{ width: '200px' }\">\n            <el-option v-for=\"(item,index) in specialOptions\" :key=\"item.index\" :label=\"item.label\" :value=\"item.value\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"是否休息\" prop=\"isRest\">\n          <el-select v-model=\"form.isRest\" placeholder=\"请选择类型\" clearable :style=\"{ width: '200px' }\">\n            <el-option label=\"是\" :value=\"1\" />\n            <el-option label=\"否\" :value=\"0\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"年份\" prop=\"nf\">\n          <el-select v-model=\"form.nf\" placeholder=\"请选择类型\" clearable :style=\"{ width: '200px' }\">\n            <el-option v-for=\"item in 10\" :key=\"item\" :label=\"2015 + item\" :value=\"2015 + item\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item v-if=\"selectScheduleForm.id\" label=\"排程\" prop=\"nf\">\n          <el-button class=\"el-button--goon\" @click=\"toEditSchedule()\">查看排程</el-button>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button v-if=\"!selectScheduleForm.id\" class=\"el-button--goon\" type=\"primary\" @click=\"viewSchedule\">添加排程</el-button>\n        <el-button class=\"el-button--goon\" type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button class=\"el-button--goon\" @click=\"cancel\">取 消</el-button>\n        <el-button  v-if=\"title == '编辑特殊日'\" @click=\"deleteForm\" :style=\"{ background: 'red',color:'white'}\">删除</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"添加排程\" :close-on-click-modal=\"false\" :visible.sync=\"dialogVisible\" width=\"30%\" style=\"color:aquamarine;\">\n      <el-form :model=\"scheduleForm\">\n        <el-form-item label=\"排程日期:\" :label-width=\"formLabelWidth\">\n          <p style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleForm.scheduleDate }}</p>\n        </el-form-item>\n        <el-form-item label=\"特殊日:\" :label-width=\"formLabelWidth\">\n          <p style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleForm.special }}</p>\n        </el-form-item>\n        <el-form-item label=\"是否休息:\" :label-width=\"formLabelWidth\">\n          <p v-if=\"scheduleForm.isRest === 0\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">否</p>\n          <p v-if=\"scheduleForm.isRest === 1\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">是</p>\n        </el-form-item>\n        <el-form-item label=\"当日标题:\" :label-width=\"formLabelWidth\">\n          <div class=\"inputGroup\">\n            <input v-model=\"scheduleForm.title\" type=\"text\" required=\"\" autocomplete=\"off\">\n          </div>\n        </el-form-item>\n        <el-form-item label=\"当日首页语:\" :label-width=\"formLabelWidth\">\n          <div class=\"inputGroup\">\n            <input v-model=\"scheduleForm.notes\" type=\"text\" required=\"\" autocomplete=\"off\">\n          </div>\n        </el-form-item>\n        <el-form-item label=\"开放式问题:\" :label-width=\"formLabelWidth\">\n          <div class=\"inputGroup\">\n            <input v-model=\"scheduleForm.openQuestion\" type=\"text\" required=\"\" autocomplete=\"off\">\n          </div>\n        </el-form-item>\n        <el-form-item label=\"问题组规则:\" :label-width=\"formLabelWidth\">\n          <el-select @change=\"change\" v-model=\"scheduleForm.groupId\" placeholder=\"请选择\">\n            <el-option v-for=\"(item,index) in options\" :key=\"item.id\" :label=\"item.groupTitle\" :value=\"item.id\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item v-if=\"isRandom\" label=\"选择主题:\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"scheduleDetailsAll.theme\" placeholder=\"请选择\">\n            <el-option v-for=\"(item,index) in themes\" :key=\"index\" :label=\"item\" :value=\"item\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button class=\"el-button--goon\" @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button class=\"el-button--goon\" type=\"primary\" @click=\"addSchedule()\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"查看排程\" :close-on-click-modal=\"false\" :visible.sync=\"dialogVisibleSchedule\" width=\"37%\" style=\"color:aquamarine;\">\n      <el-form :model=\"scheduleDetailsAll\">\n        <el-form-item label=\"排程日期:\" :label-width=\"formLabelWidth\">\n          <p style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.scheduleDate }}</p>\n        </el-form-item>\n        <el-form-item label=\"特殊日:\" :label-width=\"formLabelWidth\">\n          <p style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.special }}</p>\n        </el-form-item>\n        <el-form-item label=\"是否休息:\" :label-width=\"formLabelWidth\">\n          <p v-if=\"scheduleDetailsAll.isRest === 0\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">否</p>\n          <p v-if=\"scheduleDetailsAll.isRest === 1\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">是</p>\n        </el-form-item>\n        <el-form-item label=\"是否已经完成:\" :label-width=\"formLabelWidth\">\n          <p v-if=\"scheduleDetailsAll.isFinished === 0\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">否</p>\n          <p v-if=\"scheduleDetailsAll.isFinished === 1\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">是</p>\n        </el-form-item>\n        <el-form-item label=\"当日标题:\" :label-width=\"formLabelWidth\">\n          <p v-if=\"scheduleDetailsAll.isFinished === 1\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.title }}</p>\n          <div v-if=\"scheduleDetailsAll.isFinished ===0\" class=\"inputGroup\">\n            <input v-model=\"scheduleDetailsAll.title\" type=\"text\" required=\"\" autocomplete=\"off\">\n          </div>\n        </el-form-item>\n        <el-form-item label=\"当日首页语:\" :label-width=\"formLabelWidth\">\n          <p v-if=\"scheduleDetailsAll.isFinished === 1\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.notes }}</p>\n          <div v-if=\"scheduleDetailsAll.isFinished ===0\" class=\"inputGroup\">\n            <input v-model=\"scheduleDetailsAll.notes\" type=\"text\" required=\"\" autocomplete=\"off\">\n          </div>\n        </el-form-item>\n        <el-form-item label=\"开放式问题:\" :label-width=\"formLabelWidth\">\n          <p v-if=\"scheduleDetailsAll.isFinished === 1\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.openQuestion }}</p>\n          <div v-if=\"scheduleDetailsAll.isFinished ===0\" class=\"inputGroup\">\n            <input v-model=\"scheduleDetailsAll.openQuestion\" type=\"text\" required=\"\" autocomplete=\"off\">\n          </div>\n        </el-form-item>\n        <el-form-item label=\"问题组规则:\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"scheduleDetailsAll.groupId\" placeholder=\"请选择\">\n            <el-option v-for=\"item in options\" :key=\"item.id\" :label=\"item.groupTitle\" :value=\"item.id\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item v-if=\"isRandom\" label=\"选择主题:\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"scheduleDetailsAll.theme\" placeholder=\"请选择\">\n            <el-option v-for=\"(item,index) in themes\" :key=\"index\" :label=\"item\" :value=\"item\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"访问人数:\" :label-width=\"formLabelWidth\">\n          <p style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.viewCount }}</p>\n        </el-form-item>\n        <el-form-item label=\"填写人数:\" :label-width=\"formLabelWidth\">\n          <p style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ scheduleDetailsAll.answerCount }}</p>\n        </el-form-item>\n        <el-form-item label=\"封闭式问题:\" :label-width=\"formLabelWidth\">\n          <p v-for=\"(item,index) in questionDetails\" :key=\"index\" style=\"color:lightseagreen;font-size:19px;margin:0;font-weight:700\">{{ index+1 }}.{{ item }}</p>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button class=\"el-button--goon\" @click=\"dialogVisibleSchedule = false\">关 闭</el-button>\n        <el-button class=\"el-button--goon\" v-if=\"scheduleDetailsAll.isFinished === 0\" type=\"primary\" @click=\"editSchedule()\">修 改 并 确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { getSpecialDay, deleteSpecialDay, add, update } from \"@/api/holiday\";\nimport scheduleApi from \"@/api/schedule\";\nimport groupApi from \"@/api/group\";\nimport questionApi from \"@/api/questions\"\n\nexport default {\n  jqmc: \"Fdjjr\",\n  data() {\n    return {\n      // 排程弹出\n      dialogVisible: false,\n      // 查看排程\n      dialogVisibleSchedule: false,\n      // 排程细节\n      scheduleDetailsAll: {},\n      scheduleForm: {},\n      formLabelWidth: '111px',\n      selectScheduleForm: {},\n      options: [],\n      schedule: [],\n      themes: [],\n      scheduleDetails: {},\n      questionDetails: [],\n      // 是否用随机组\n      isRandom: false,\n      rqi:[],\n      rqineirong:{},\n      // 遮罩层\n      loading: true,\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        jqmc: [\n          { required: true, message: \"假期名称不能为空\", trigger: \"blur\" }\n        ],\n        kssj: [\n          { required: true, message: \"开始时间不能为空\", trigger: \"blur\" }\n        ],\n        jssj: [\n          { required: true, message: \"结束时间不能为空\", trigger: \"blur\" }\n        ],\n        lx: [\n          { required: true, message: \"假期类型不能为空\", trigger: \"change\" }\n        ],\n        nf: [\n          { required: true, message: \"年份不能为空\", trigger: \"change\" }\n        ],\n        isRest: [\n          { required: true, message: \"是否休假类型不能为空\", trigger: \"change\" }\n        ],\n      },\n      // 节假日类型\n      // 中国传统节日，国际节日，商业或现代衍生日（程序员节），台湾节日，香港节日，中国少民节日，公司特殊日，纪念日（如香港回归））\n      specialOptions: [\n        {\n          value: '中国传统节日',\n          label: '中国传统节日'\n        },\n        {\n          value: '国际节日',\n          label: '国际节日'\n        },\n        {\n          value: '商业或现代衍生日',\n          label: '商业或现代衍生日（如双十一)'\n        },\n        {\n          value: '台湾节日',\n          label: '台湾节日'\n        },\n        {\n          value: '香港节日',\n          label: '香港节日'\n        },\n        {\n          value: '中国少数民族节日',\n          label: '中国少数民族节日'\n        },\n        {\n          value: '公司特殊日',\n          label: '公司特殊日'\n        },\n        {\n          value: '纪念日',\n          label: '纪念日'\n        },\n        {\n          value: '纪念日',\n          label: '纪念日'\n        },\n        {\n          value: '周末',\n          label: '周末'\n        },\n        {\n          value: '补班',\n          label: '补班'\n        },\n      ],\n    };\n  },\n  created() {\n    this.getList()\n    this.queryScheduleListAll()\n    this.getOptions()\n    this.getQuestionAsOption()\n  },\n  methods: {\n    getQuestionAsOption() {\n      questionApi.getQuestionAsOption().then(res => {\n        if(res.data.code === 200) {\n          this.themes = res.data.data.list\n          // console.log(this.themes)\n        }\n      })\n    },\n    change(e) {\n      this.options.forEach(element => {\n        if(e === element.id) {\n          this.scheduleForm.formula = element.formula\n          this.scheduleForm.groupType = element.type\n        }\n      })\n      if(this.scheduleForm.groupType === 0) {\n        this.isRandom = true\n      }\n      // console.log(this.scheduleForm)\n    },\n    getOptions(){\n      groupApi.getFormDataListPage(1,100,null).then(res => {\n        if(res.data.code === 200) {\n          this.options = res.data.data.rows\n          // console.log(this.options)\n        }\n      })\n    },\n    toEditSchedule() {\n      scheduleApi.querySchedule(this.selectScheduleForm.id).then(res => {\n        // console.log(res.data.data.schedule)\n        if(res.data.code === 200) {\n          console.log(res.data.data.schedule)\n          this.dialogVisibleSchedule = true\n          this.scheduleDetailsAll = res.data.data.schedule\n          this.questionDetails = JSON.parse(this.scheduleDetailsAll.details)\n        }\n      })\n    },\n    editSchedule() {\n      this.dialogVisibleSchedule = false\n    },\n    viewSchedule() {\n      this.scheduleForm = {}\n      this.dialogVisible = true\n      this.scheduleForm.scheduleDate = this.form.kssj\n      if(this.form.isRest) {\n        this.scheduleForm.isRest = this.form.isRest\n      } else {\n        this.scheduleForm.isRest = 0\n      }\n      if(this.form.jqmc) {\n        this.scheduleForm.special = this.form.jqmc\n      } else {\n        this.scheduleForm.special = '普通日'\n      }\n    },\n    addSchedule() {\n      scheduleApi.addSchedule(this.scheduleForm).then(res => {\n        if(res.data.code === 200) {\n          this.$message({\n            type: 'success',\n            message: '添加成功'\n          })\n          this.selectScheduleForm = res.data.data.schedule\n          this.dialogVisible = false\n        }\n      })\n    },\n    /** 查询节假日管理 - 法定节假日列表 */\n    getList() {\n      this.loading = true;\n      getSpecialDay(this.queryParams).then(response => {\n        // console.log(response.data.data.resultList)\n        this.rqi = []\n        this.rqineirong = {}\n        for(let i=0; i<response.data.data.resultList.length; i++){\n          for(var key in response.data.data.resultList[i]){\n            this.rqi.push(key)\n            this.rqineirong[key] = response.data.data.resultList[i][key]\n          }\n        }\n        // console.log(this.rqi)\n         console.log(this.rqineirong)\n      })\n    },\n    queryScheduleListAll() {\n      scheduleApi.queryScheduleListAll().then(res => {\n        this.schedule = []\n        this.scheduleDetails = {}\n        for(let i=0; i<res.data.data.list.length; i++){\n          for(var key in res.data.data.list[i]){\n            this.schedule.push(key)\n            this.scheduleDetails[key] = res.data.data.list[i][key]\n          }\n        }\n        console.log(this.schedule)\n      })\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        jqmc: undefined,\n        kssj: undefined,\n        jssj: undefined,\n        lx: undefined\n      };\n      // this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery(day) {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 提交按钮 */\n    submitForm: function() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != undefined) {\n            update(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '修改成功'\n                })\n                this.open = false\n                this.reset()\n                this.getList()\n              }\n            })\n          } else {\n            add(this.form).then(res => {\n              if (res.data.code === 200) {\n                this.$message({\n                  type: 'success',\n                  message: '添加成功'\n                })\n                this.open = false\n                this.reset()\n                this.getList()\n              }\n            });\n          }\n        }\n      });\n    },\n    /** 编辑日期操作 */\n    handleBianJi(day) {\n      if(this.rqineirong[day]){\n        console.log(this.rqineirong[day])\n        this.form = this.rqineirong[day]\n        this.title = '编辑特殊日'\n      }else{\n        let obj = {}\n        obj.kssj = day.valueOf()\n        obj.jssj = day.valueOf()\n        this.form = obj\n        this.form = obj\n        this.title = '新增特殊日'\n      }\n      this.open = true\n      if(this.scheduleDetails[day]){\n        this.selectScheduleForm = this.scheduleDetails[day]\n      } else {\n        this.selectScheduleForm = {}\n      }\n    },\n    deleteForm(){\n      let ids = [];\n      ids.push(this.form.id)\n      deleteSpecialDay(ids).then(res => {\n        if (res.data.code === 200) {\n          this.msgSuccess(\"删除成功\")\n          this.open = false\n          this.reset()\n          this.getList()\n        }\n      });\n    }\n  }\n};\n</script>\n<style scoped>\n  .is-selected {\n    color: lightseagreen;\n    /* background: rgba(32, 178, 171, 0.305); */\n  }\n  .app-container {\n    margin: 7px;\n  }\n  #dateCell {\n    display: flex;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n\n    /* 按钮风格重定义 */\n.el-button--goon {\n  color: #ffffff;\n  background-color: #13c2c2;\n  border-color: #13c2c2;\n  height: 34px;\n  line-height: 34px;\n  padding: 0 20px;\n}\n.el-button--goon:focus, .el-button--goon:hover {\n  color: rgb(245, 245, 245);\n  background-color: #0e9a9a;\n  border-color: #0e9a9a;\n  height: 34px;\n  line-height: 34px;\n  padding: 0 20px;\n}\n.el-button--goon:active {\n  color:  #ffffff;\n  background-color: #13c2c2;\n  border-color: #13c2c2;\n  height: 34px;\n  line-height: 34px;\n  padding: 0 20px;\n}\n/* 按钮风格重定义 */\n\n\n.inputGroup {\n  font-family: 'Segoe UI', sans-serif;\n  margin: 0em 0 0em 0;\n  max-width: 297px;\n  position: relative;\n}\n\n.inputGroup input {\n  font-size: 100%;\n  padding: 0.8em;\n  outline: none;\n  border: 2px solid rgb(200, 200, 200);\n  background-color: transparent;\n  border-radius: 7px;\n  width: 100%;\n}\n\n.inputGroup :is(input:focus, input:valid)~label {\n  transform: translateY(-50%) scale(.9);\n  margin: 0em;\n  margin-left: 1.3em;\n  padding: 0.4em;\n  background-color: #e8e8e8;\n}\n\n.inputGroup :is(input:focus, input:valid) {\n  border-color: lightseagreen;\n}\n</style>\n"],"mappings":";AAmKA,SAAAA,aAAA,EAAAC,gBAAA,EAAAC,GAAA,EAAAC,MAAA;AACA,OAAAC,WAAA;AACA,OAAAC,QAAA;AACA,OAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,aAAA;MACA;MACAC,qBAAA;MACA;MACAC,kBAAA;MACAC,YAAA;MACAC,cAAA;MACAC,kBAAA;MACAC,OAAA;MACAC,QAAA;MACAC,MAAA;MACAC,eAAA;MACAC,eAAA;MACA;MACAC,QAAA;MACAC,GAAA;MACAC,UAAA;MACA;MACAC,OAAA;MACA;MACAC,KAAA;MACA;MACAC,IAAA;MACA;MACAC,IAAA;MACA;MACAC,KAAA;QACApB,IAAA,GACA;UAAAqB,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAC,IAAA,GACA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAE,IAAA,GACA;UAAAJ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAG,EAAA,GACA;UAAAL,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAI,EAAA,GACA;UAAAN,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAK,MAAA,GACA;UAAAP,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;MACA;MACA;MACAM,cAAA,GACA;QACAC,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA;IAEA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;IACA,KAAAC,oBAAA;IACA,KAAAC,UAAA;IACA,KAAAC,mBAAA;EACA;EACAC,OAAA;IACAD,oBAAA;MACArC,WAAA,CAAAqC,mBAAA,GAAAE,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;UACA,KAAA9B,MAAA,GAAA6B,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAwC,IAAA;UACA;QACA;MACA;IACA;;IACAC,OAAAC,CAAA;MACA,KAAAnC,OAAA,CAAAoC,OAAA,CAAAC,OAAA;QACA,IAAAF,CAAA,KAAAE,OAAA,CAAAC,EAAA;UACA,KAAAzC,YAAA,CAAA0C,OAAA,GAAAF,OAAA,CAAAE,OAAA;UACA,KAAA1C,YAAA,CAAA2C,SAAA,GAAAH,OAAA,CAAAI,IAAA;QACA;MACA;MACA,SAAA5C,YAAA,CAAA2C,SAAA;QACA,KAAAnC,QAAA;MACA;MACA;IACA;;IACAsB,WAAA;MACArC,QAAA,CAAAoD,mBAAA,eAAAZ,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;UACA,KAAAhC,OAAA,GAAA+B,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAkD,IAAA;UACA;QACA;MACA;IACA;;IACAC,eAAA;MACAvD,WAAA,CAAAwD,aAAA,MAAA9C,kBAAA,CAAAuC,EAAA,EAAAR,IAAA,CAAAC,GAAA;QACA;QACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;UACAc,OAAA,CAAAC,GAAA,CAAAhB,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAQ,QAAA;UACA,KAAAN,qBAAA;UACA,KAAAC,kBAAA,GAAAmC,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAQ,QAAA;UACA,KAAAG,eAAA,GAAA4C,IAAA,CAAAC,KAAA,MAAArD,kBAAA,CAAAsD,OAAA;QACA;MACA;IACA;IACAC,aAAA;MACA,KAAAxD,qBAAA;IACA;IACAyD,aAAA;MACA,KAAAvD,YAAA;MACA,KAAAH,aAAA;MACA,KAAAG,YAAA,CAAAwD,YAAA,QAAA1C,IAAA,CAAAK,IAAA;MACA,SAAAL,IAAA,CAAAS,MAAA;QACA,KAAAvB,YAAA,CAAAuB,MAAA,QAAAT,IAAA,CAAAS,MAAA;MACA;QACA,KAAAvB,YAAA,CAAAuB,MAAA;MACA;MACA,SAAAT,IAAA,CAAAnB,IAAA;QACA,KAAAK,YAAA,CAAAyD,OAAA,QAAA3C,IAAA,CAAAnB,IAAA;MACA;QACA,KAAAK,YAAA,CAAAyD,OAAA;MACA;IACA;IACAC,YAAA;MACAlE,WAAA,CAAAkE,WAAA,MAAA1D,YAAA,EAAAiC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;UACA,KAAAwB,QAAA;YACAf,IAAA;YACA3B,OAAA;UACA;UACA,KAAAf,kBAAA,GAAAgC,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAQ,QAAA;UACA,KAAAP,aAAA;QACA;MACA;IACA;IACA;IACA+B,QAAA;MACA,KAAAjB,OAAA;MACAvB,aAAA,MAAAwE,WAAA,EAAA3B,IAAA,CAAA4B,QAAA;QACA;QACA,KAAApD,GAAA;QACA,KAAAC,UAAA;QACA,SAAAoD,CAAA,MAAAA,CAAA,GAAAD,QAAA,CAAAjE,IAAA,CAAAA,IAAA,CAAAmE,UAAA,CAAAC,MAAA,EAAAF,CAAA;UACA,SAAAG,GAAA,IAAAJ,QAAA,CAAAjE,IAAA,CAAAA,IAAA,CAAAmE,UAAA,CAAAD,CAAA;YACA,KAAArD,GAAA,CAAAyD,IAAA,CAAAD,GAAA;YACA,KAAAvD,UAAA,CAAAuD,GAAA,IAAAJ,QAAA,CAAAjE,IAAA,CAAAA,IAAA,CAAAmE,UAAA,CAAAD,CAAA,EAAAG,GAAA;UACA;QACA;QACA;QACAhB,OAAA,CAAAC,GAAA,MAAAxC,UAAA;MACA;IACA;IACAmB,qBAAA;MACArC,WAAA,CAAAqC,oBAAA,GAAAI,IAAA,CAAAC,GAAA;QACA,KAAA9B,QAAA;QACA,KAAAE,eAAA;QACA,SAAAwD,CAAA,MAAAA,CAAA,GAAA5B,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAwC,IAAA,CAAA4B,MAAA,EAAAF,CAAA;UACA,SAAAG,GAAA,IAAA/B,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAwC,IAAA,CAAA0B,CAAA;YACA,KAAA1D,QAAA,CAAA8D,IAAA,CAAAD,GAAA;YACA,KAAA3D,eAAA,CAAA2D,GAAA,IAAA/B,GAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAwC,IAAA,CAAA0B,CAAA,EAAAG,GAAA;UACA;QACA;QACAhB,OAAA,CAAAC,GAAA,MAAA9C,QAAA;MACA;IACA;IACA;IACA+D,OAAA;MACA,KAAAtD,IAAA;MACA,KAAAuD,KAAA;IACA;IACA;IACAA,MAAA;MACA,KAAAtD,IAAA;QACAnB,IAAA,EAAA0E,SAAA;QACAlD,IAAA,EAAAkD,SAAA;QACAjD,IAAA,EAAAiD,SAAA;QACAhD,EAAA,EAAAgD;MACA;MACA;IACA;;IACA;IACAC,YAAAC,GAAA;MACA,KAAAX,WAAA,CAAAY,OAAA;MACA,KAAA5C,OAAA;IACA;IACA;IACA6C,UAAA,WAAAA,CAAA;MACA,KAAAC,KAAA,SAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,SAAA9D,IAAA,CAAA2B,EAAA,IAAA4B,SAAA;YACA9E,MAAA,MAAAuB,IAAA,EAAAmB,IAAA,CAAAC,GAAA;cACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;gBACA,KAAAwB,QAAA;kBACAf,IAAA;kBACA3B,OAAA;gBACA;gBACA,KAAAJ,IAAA;gBACA,KAAAuD,KAAA;gBACA,KAAAxC,OAAA;cACA;YACA;UACA;YACAtC,GAAA,MAAAwB,IAAA,EAAAmB,IAAA,CAAAC,GAAA;cACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;gBACA,KAAAwB,QAAA;kBACAf,IAAA;kBACA3B,OAAA;gBACA;gBACA,KAAAJ,IAAA;gBACA,KAAAuD,KAAA;gBACA,KAAAxC,OAAA;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAiD,aAAAN,GAAA;MACA,SAAA7D,UAAA,CAAA6D,GAAA;QACAtB,OAAA,CAAAC,GAAA,MAAAxC,UAAA,CAAA6D,GAAA;QACA,KAAAzD,IAAA,QAAAJ,UAAA,CAAA6D,GAAA;QACA,KAAA3D,KAAA;MACA;QACA,IAAAkE,GAAA;QACAA,GAAA,CAAA3D,IAAA,GAAAoD,GAAA,CAAAQ,OAAA;QACAD,GAAA,CAAA1D,IAAA,GAAAmD,GAAA,CAAAQ,OAAA;QACA,KAAAjE,IAAA,GAAAgE,GAAA;QACA,KAAAhE,IAAA,GAAAgE,GAAA;QACA,KAAAlE,KAAA;MACA;MACA,KAAAC,IAAA;MACA,SAAAP,eAAA,CAAAiE,GAAA;QACA,KAAArE,kBAAA,QAAAI,eAAA,CAAAiE,GAAA;MACA;QACA,KAAArE,kBAAA;MACA;IACA;IACA8E,WAAA;MACA,IAAAC,GAAA;MACAA,GAAA,CAAAf,IAAA,MAAApD,IAAA,CAAA2B,EAAA;MACApD,gBAAA,CAAA4F,GAAA,EAAAhD,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAtC,IAAA,CAAAuC,IAAA;UACA,KAAA+C,UAAA;UACA,KAAArE,IAAA;UACA,KAAAuD,KAAA;UACA,KAAAxC,OAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}